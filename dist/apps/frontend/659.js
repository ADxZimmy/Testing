"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[659],{4659:($,v,e)=>{e.r(v),e.d(v,{SettingsComponent:()=>p});var f=e(7582),o=e(6484),d=e(95),S=e(8791),a=e(359),F=e(6605),T=e(2873),U=e(8407),C=e(6328),y=e(9397),I=e(7398),Y=e(9604),t=e(5879);let Z=(()=>{class r{constructor(s){this.apiService=s}update(s){return this.apiService.put("/user",{user:s})}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Y.s))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var b=e(4937),l=e(4221);let u=(()=>{class r extends F.m1{constructor(s,n,c,h){super({}),this.settingsService=s,this.localStorageJwtService=n,this.router=c,this.store=h,this.updateSettings=this.effect((0,U.z)((0,T.IC)(()=>[this.store.select(o.LH.selectData)]),(0,C.b)(([,N])=>this.settingsService.update(N).pipe((0,y.b)(m=>this.router.navigate(["profile",m.user.username])),(0,y.b)(m=>this.localStorageJwtService.setItem(m.user.token)),(0,I.U)(()=>this.store.dispatch(a.YV.getUser()))))))}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z),t.LFG(a.YX),t.LFG(b.F0),t.LFG(l.yh))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac})}return r})();const L=[{type:"INPUT",name:"image",placeholder:"URL of profile picture",validator:[]},{type:"INPUT",name:"username",placeholder:"Your Name",validator:[d.kI.required]},{type:"TEXTAREA",name:"bio",placeholder:"Short bio about you",validator:[]},{type:"INPUT",name:"email",placeholder:"Email",validator:[d.kI.required]},{type:"INPUT",name:"password",placeholder:"New Password",validator:[d.kI.required],attrs:{type:"password"}}];let p=class g{constructor(i,s){this.store=i,this.settingsStoreService=s,this.structure$=this.store.select(o.LH.selectStructure),this.data$=this.store.select(o.LH.selectData)}ngOnInit(){this.store.dispatch(a.YV.getUser()),this.store.dispatch(o.i2.setStructure({structure:L})),this.store.select(a.dy).pipe((0,S.t)(this)).subscribe(i=>this.store.dispatch(o.i2.setData({data:i})))}updateForm(i){this.store.dispatch(o.i2.updateData({data:i}))}submit(){this.settingsStoreService.updateSettings()}logout(){this.store.dispatch(a.YV.logout())}static#t=this.\u0275fac=function(s){return new(s||g)(t.Y36(l.yh),t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["cdt-settings"]],standalone:!0,features:[t._Bn([u]),t.jDz],decls:14,vars:2,consts:[[1,"settings-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"data$","structure$","updateForm"],[1,"edit-button-container"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Your Settings"),t.qZA(),t._UZ(6,"cdt-list-errors"),t.TgZ(7,"cdt-dynamic-form",5),t.NdJ("updateForm",function(h){return n.updateForm(h)}),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.submit()}),t._uU(10,"Update Settings"),t.qZA()(),t._UZ(11,"hr"),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.logout()}),t._uU(13,"Or click here to logout."),t.qZA()()()()()),2&s&&(t.xp6(7),t.Q6J("data$",n.data$)("structure$",n.structure$))},dependencies:[o.rm,o.St],styles:[".edit-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})};p=(0,f.gn)([(0,S.c)(),(0,f.w6)("design:paramtypes",[l.yh,u])],p)}}]);