"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[817],{9032:(Q,w,d)=>{d.d(w,{bQ:()=>y,oP:()=>f,G4:()=>T,wi:()=>_,XY:()=>v,jY:()=>x,up:()=>A,h3:()=>t,$1:()=>M,WX:()=>Z,qf:()=>N,XJ:()=>rt,Wd:()=>C,$M:()=>F});var v={};d.r(v),d.d(v,{addComment$:()=>D,addCommentSuccess$:()=>H,deleteArticle$:()=>B,deleteArticleSuccess$:()=>V,deleteComment$:()=>Y,follow$:()=>j,loadArticle$:()=>q,loadComments$:()=>R,unFollow$:()=>z});var _={};d.r(_),d.d(_,{publishArticle$:()=>at});var t={};d.r(t),d.d(t,{loadArticles$:()=>dt,setListPage$:()=>ut,setListTag$:()=>ft});var F={};d.r(F),d.d(F,{favorite$:()=>mt,unFavorite$:()=>pt});var P=d(9604),u=d(5879);let y=(()=>{class e{constructor(i){this.apiService=i}followUser(i){return this.apiService.post("/profiles/"+i+"/follow")}unfollowUser(i){return this.apiService.delete("/profiles/"+i+"/follow")}favorite(i){return this.apiService.post("/articles/"+i+"/favorite")}unfavorite(i){return this.apiService.delete("/articles/"+i+"/favorite")}static#t=this.\u0275fac=function(c){return new(c||e)(u.LFG(P.s))};static#e=this.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var n=d(4221);const A=(0,n.R7)({source:"Article List",events:{setListPage:(0,n.Ky)(),setListConfig:(0,n.Ky)(),loadArticles:(0,n.uZ)(),loadArticlesFailure:(0,n.Ky)(),loadArticlesSuccess:(0,n.Ky)()}}),C=(0,n.R7)({source:"Articles",events:{favorite:(0,n.Ky)(),favoriteFailure:(0,n.Ky)(),favoriteSuccess:(0,n.Ky)(),unfavorite:(0,n.Ky)(),unfavoriteFailure:(0,n.Ky)(),unfavoriteSuccess:(0,n.Ky)()}}),Z={listConfig:{type:"ALL",currentPage:1,filters:{limit:10}},articles:{entities:[],articlesCount:0,loaded:!1,loading:!1}},M=(0,n.Tz)({name:"articlesList",reducer:(0,n.Lq)(Z,(0,n.on)(A.setListPage,(e,{page:r})=>{const i={...e.listConfig.filters,offset:e?.listConfig?.filters?.limit??1*(r-1)},c={...e.listConfig,currentPage:r,filters:i};return{...e,listConfig:c}}),(0,n.on)(A.setListConfig,(e,{config:r})=>({...e,listConfig:r})),(0,n.on)(A.loadArticles,e=>{const r={...e.articles,loading:!0};return{...e,articles:r}}),(0,n.on)(A.loadArticlesSuccess,(e,r)=>{const i={...e.articles,entities:r.articles,articlesCount:r.articlesCount,loading:!1,loaded:!0};return{...e,articles:i}}),(0,n.on)(A.loadArticlesFailure,(e,r)=>{const i={...e.articles,entities:[],articlesCount:0,loading:!1,loaded:!0};return{...e,articles:i}}),(0,n.on)(C.unfavoriteSuccess,C.favoriteSuccess,(e,{article:r})=>({...e,articles:G(e.articles,r)})))});function G(e,r){const i=e.entities.findIndex(h=>h.slug===r.slug),c=[...e.entities.slice(0,i),Object.assign({},e.entities[i],r),...e.entities.slice(i+1)];return{...e,entities:c,loading:!1,loaded:!0}}const f=(0,n.R7)({source:"Article",events:{loadArticle:(0,n.Ky)(),loadArticleFailure:(0,n.Ky)(),loadArticleSuccess:(0,n.Ky)(),deleteArticle:(0,n.Ky)(),deleteArticleFailure:(0,n.Ky)(),deleteArticleSuccess:(0,n.uZ)(),initializeArticle:(0,n.uZ)(),loadComments:(0,n.Ky)(),loadCommentsFailure:(0,n.Ky)(),loadCommentsSuccess:(0,n.Ky)(),follow:(0,n.Ky)(),followFailure:(0,n.Ky)(),followSuccess:(0,n.Ky)(),unfollow:(0,n.Ky)(),unfollowFailure:(0,n.Ky)(),unfollowSuccess:(0,n.Ky)(),addComment:(0,n.Ky)(),addCommentFailure:(0,n.Ky)(),addCommentSuccess:(0,n.Ky)(),deleteComment:(0,n.Ky)(),deleteCommentFailure:(0,n.Ky)(),deleteCommentSuccess:(0,n.Ky)()}}),T=(0,n.R7)({source:"Article Edit",events:{publishArticle:(0,n.uZ)(),publishArticleSuccess:(0,n.uZ)()}}),K={data:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}},comments:[],loaded:!1,loading:!1},x=(0,n.Tz)({name:"article",reducer:(0,n.Lq)(K,(0,n.on)(f.loadArticleSuccess,(e,r)=>({...e,data:r.article,loaded:!0,loading:!1})),(0,n.on)(f.loadArticleFailure,e=>({...e,data:K.data,loaded:!1,loading:!1})),(0,n.on)(f.addCommentSuccess,(e,r)=>{const i=[r.comment,...e.comments];return{...e,comments:i}}),(0,n.on)(f.deleteCommentSuccess,(e,r)=>{const i=e.comments.filter(c=>c.id!==r.commentId);return{...e,comments:i}}),(0,n.on)(f.initializeArticle,T.publishArticleSuccess,f.deleteArticleFailure,e=>K),(0,n.on)(f.loadCommentsSuccess,(e,r)=>({...e,comments:r.comments})),(0,n.on)(f.loadCommentsFailure,e=>({...e,comments:K.comments})),(0,n.on)(f.followSuccess,f.unfollowSuccess,(e,r)=>{const i={...e.data,author:r.profile};return{...e,data:i}}),(0,n.on)(C.favoriteSuccess,C.unfavoriteSuccess,(e,r)=>({...e,data:r.article})))});var l=d(2873),s=d(6328),p=d(7398),o=d(6306),a=d(2096),m=d(7634),g=d(9397),O=d(9862);let S=(()=>{class e{constructor(i){this.apiService=i}getArticle(i){return this.apiService.get("/articles/"+i)}getComments(i){return this.apiService.get(`/articles/${i}/comments`)}deleteArticle(i){return this.apiService.delete("/articles/"+i)}deleteComment(i,c){return this.apiService.delete(`/articles/${c}/comments/${i}`)}addComment(i,c=""){return this.apiService.post(`/articles/${i}/comments`,{comment:{body:c}})}query(i){return this.apiService.get("/articles"+("FEED"===i.type?"/feed":""),this.toHttpParams(i.filters))}publishArticle(i){return i.slug?this.apiService.put("/articles/"+i.slug,{article:i}):this.apiService.post("/articles/",{article:i})}toHttpParams(i){return Object.getOwnPropertyNames(i).reduce((c,h)=>c.set(h,i[h]),new O.LE)}static#t=this.\u0275fac=function(c){return new(c||e)(u.LFG(P.s))};static#e=this.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var $=d(6484),I=d(4937);const z=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(y))=>e.pipe((0,l.l4)(f.unfollow),(0,s.b)(({username:i})=>r.unfollowUser(i).pipe((0,p.U)(c=>f.unfollowSuccess({profile:c.profile})),(0,o.K)(c=>(0,a.of)(f.unfollowFailure(c)))))),{functional:!0}),j=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(y))=>e.pipe((0,l.l4)(f.follow),(0,s.b)(({username:i})=>r.followUser(i).pipe((0,p.U)(c=>f.followSuccess({profile:c.profile})),(0,o.K)(c=>(0,a.of)(f.followFailure(c)))))),{functional:!0}),Y=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S))=>e.pipe((0,l.l4)(f.deleteComment),(0,s.b)(({commentId:i,slug:c})=>r.deleteComment(i,c).pipe((0,p.U)(h=>f.deleteCommentSuccess({commentId:i})),(0,o.K)(h=>(0,a.of)(f.deleteCommentFailure(h)))))),{functional:!0}),D=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S),i=(0,u.f3M)(n.yh))=>e.pipe((0,l.l4)(f.addComment),(0,l.IC)(()=>i.select($.LH.selectData)),(0,m.z)(([{slug:c},h])=>r.addComment(c,h.comment).pipe((0,p.U)(L=>f.addCommentSuccess({comment:L.comment})),(0,o.K)(({error:L})=>(0,a.of)($.i2.setErrors({errors:L.errors})))))),{functional:!0}),H=(0,l.GW)((e=(0,u.f3M)(l.eX))=>e.pipe((0,l.l4)(f.addCommentSuccess),(0,p.U)(()=>$.i2.resetForm())),{functional:!0}),q=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S))=>e.pipe((0,l.l4)(f.loadArticle),(0,s.b)(i=>r.getArticle(i.slug).pipe((0,p.U)(c=>f.loadArticleSuccess({article:c.article})),(0,o.K)(c=>(0,a.of)(f.loadArticleFailure(c)))))),{functional:!0}),R=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S))=>e.pipe((0,l.l4)(f.loadComments),(0,s.b)(i=>r.getComments(i.slug).pipe((0,p.U)(c=>f.loadCommentsSuccess({comments:c.comments})),(0,o.K)(c=>(0,a.of)(f.loadCommentsFailure(c)))))),{functional:!0}),B=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S))=>e.pipe((0,l.l4)(f.deleteArticle),(0,s.b)(i=>r.deleteArticle(i.slug).pipe((0,p.U)(()=>f.deleteArticleSuccess()),(0,o.K)(c=>(0,a.of)(f.deleteArticleFailure(c)))))),{functional:!0}),V=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(I.F0))=>e.pipe((0,l.l4)(f.deleteArticleSuccess),(0,g.b)(()=>r.navigate(["/"]))),{functional:!0,dispatch:!1}),{selectArticleState:k,selectComments:tt,selectData:b,selectLoaded:et,selectLoading:it}=x,rt={selectArticleState:k,selectComments:tt,selectData:b,selectLoaded:et,selectLoading:it,getAuthorUsername:(0,n.P1)(b,e=>e.author.username)},{selectArticlesListState:st,selectArticles:U,selectListConfig:J}=M,ot=(0,n.P1)(U,e=>e.entities),E=(0,n.P1)(U,e=>e.articlesCount),N={selectArticlesListState:st,selectArticles:U,selectArticleEntities:ot,selectListConfig:J,selectArticlesCount:E,isLoading:(0,n.P1)(U,e=>e.loading),selectTotalPages:(0,n.P1)(E,J,(e,r)=>Array.from(new Array(Math.ceil(e/(r?.filters?.limit??1))),(i,c)=>c+1))},at=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(S),i=(0,u.f3M)(n.yh),c=(0,u.f3M)(I.F0))=>e.pipe((0,l.l4)(T.publishArticle),(0,l.IC)(()=>i.select($.LH.selectData)),(0,s.b)(([h,L])=>r.publishArticle(L).pipe((0,g.b)(W=>c.navigate(["article",W.article.slug])),(0,p.U)(()=>T.publishArticleSuccess()),(0,o.K)(W=>(0,a.of)($.i2.setErrors({errors:W.error.errors})))))),{functional:!0}),ut=(0,l.GW)((e=(0,u.f3M)(l.eX))=>e.pipe((0,l.l4)(A.setListPage),(0,p.U)(()=>A.loadArticles())),{functional:!0}),ft=(0,l.GW)((e=(0,u.f3M)(l.eX))=>e.pipe((0,l.l4)(A.setListConfig),(0,p.U)(()=>A.loadArticles())),{functional:!0}),dt=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(n.yh),i=(0,u.f3M)(S))=>e.pipe((0,l.l4)(A.loadArticles),(0,l.IC)(()=>r.select(N.selectListConfig)),(0,s.b)(([c,h])=>i.query(h).pipe((0,p.U)(L=>A.loadArticlesSuccess({articles:L.articles,articlesCount:L.articlesCount})),(0,o.K)(L=>(0,a.of)(A.loadArticlesFailure({error:L})))))),{functional:!0}),mt=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(y))=>e.pipe((0,l.l4)(C.favorite),(0,s.b)(({slug:i})=>r.favorite(i).pipe((0,p.U)(c=>C.favoriteSuccess({article:c.article})),(0,o.K)(c=>(0,a.of)(C.favoriteFailure(c)))))),{functional:!0}),pt=(0,l.GW)((e=(0,u.f3M)(l.eX),r=(0,u.f3M)(y))=>e.pipe((0,l.l4)(C.unfavorite),(0,s.b)(({slug:i})=>r.unfavorite(i).pipe((0,p.U)(c=>C.unfavoriteSuccess({article:c.article})),(0,o.K)(c=>(0,a.of)(C.unfavoriteFailure(c)))))),{functional:!0})},8817:(Q,w,d)=>{d.d(w,{P:()=>l});var v=d(6814),_=d(9032),t=d(5879),F=d(4937);function P(s,p){if(1&s&&(t.TgZ(0,"li",12),t._uU(1),t.qZA()),2&s){const o=p.$implicit;t.xp6(1),t.hij(" ",o," ")}}const u=function(s){return["/profile",s]},y=function(s,p){return{"btn-outline-primary":s,"btn-primary":p}};let n=(()=>{class s{constructor(){this.favorite=new t.vpe,this.unFavorite=new t.vpe,this.navigateToArticle=new t.vpe}toggleFavorite(o){o.favorited?this.unFavorite.emit(o.slug):this.favorite.emit(o.slug)}static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["cdt-article-list-item"]],inputs:{article:"article"},outputs:{favorite:"favorite",unFavorite:"unFavorite",navigateToArticle:"navigateToArticle"},standalone:!0,features:[t.jDz],decls:23,vars:17,consts:[[1,"article-preview"],[1,"article-meta"],[3,"src"],[1,"info"],["data-e2e-id","article-author",1,"author",3,"routerLink"],[1,"date"],[1,"btn","btn-sm","pull-xs-right",3,"ngClass","click"],[1,"ion-heart"],[1,"preview-link",3,"click"],["data-e2e-id","article-list-title"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(a,m){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a"),t._UZ(3,"img",2),t.qZA(),t.TgZ(4,"div",3)(5,"a",4),t._uU(6),t.qZA(),t.TgZ(7,"span",5),t._uU(8),t.ALo(9,"date"),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return m.toggleFavorite(m.article)}),t._UZ(11,"i",7),t.TgZ(12,"div",3),t._uU(13),t.qZA()()(),t.TgZ(14,"a",8),t.NdJ("click",function(){return m.navigateToArticle.emit(m.article.slug)}),t.TgZ(15,"h1",9),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Read more..."),t.qZA(),t.TgZ(21,"ul",10),t.YNc(22,P,2,1,"li",11),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("src",m.article.author.image,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(12,u,m.article.author.username)),t.xp6(1),t.hij(" ",m.article.author.username," "),t.xp6(2),t.hij(" ",t.xi3(9,9,m.article.createdAt,"longDate")," "),t.xp6(2),t.Q6J("ngClass",t.WLB(14,y,!m.article.favorited,m.article.favorited)),t.xp6(3),t.Oqu(m.article.favoritesCount),t.xp6(3),t.Oqu(m.article.title),t.xp6(2),t.Oqu(m.article.description),t.xp6(4),t.Q6J("ngForOf",m.article.tagList))},dependencies:[v.ez,v.mk,v.sg,v.uU,F.Bz,F.rH],changeDetection:0})}return s})();const A=function(s){return{active:s}};function C(s,p){if(1&s){const o=t.EpF();t.TgZ(0,"li",2),t.NdJ("click",function(){const g=t.CHM(o).$implicit,O=t.oxw();return t.KtG(O.setPage.emit(g))}),t.TgZ(1,"a",3),t._uU(2),t.qZA()()}if(2&s){const o=p.$implicit,a=t.oxw();t.Q6J("ngClass",t.VKq(2,A,o===a.currentPage)),t.xp6(2),t.Oqu(o)}}let X=(()=>{class s{constructor(){this.setPage=new t.vpe}static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["cdt-pager"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{setPage:"setPage"},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[[1,"pagination"],["data-e2e-id","pagination-item","class","page-item",3,"ngClass","click",4,"ngFor","ngForOf"],["data-e2e-id","pagination-item",1,"page-item",3,"ngClass","click"],["data-e2e-id","pagination-link",1,"page-link"]],template:function(a,m){1&a&&(t.TgZ(0,"ul",0),t.YNc(1,C,3,4,"li",1),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngForOf",m.totalPages))},dependencies:[v.ez,v.mk,v.sg],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return s})();var Z=d(4221);function M(s,p){if(1&s){const o=t.EpF();t.TgZ(0,"cdt-article-list-item",5),t.NdJ("navigateToArticle",function(m){t.CHM(o);const g=t.oxw(3);return t.KtG(g.navigateToArticle(m))})("unFavorite",function(m){t.CHM(o);const g=t.oxw(3);return t.KtG(g.unFavorite(m))})("favorite",function(m){t.CHM(o);const g=t.oxw(3);return t.KtG(g.favorite(m))}),t.qZA()}2&s&&t.Q6J("article",p.$implicit)}function G(s,p){if(1&s){const o=t.EpF();t.ynx(0),t.YNc(1,M,1,1,"cdt-article-list-item",3),t.ALo(2,"async"),t.TgZ(3,"cdt-pager",4),t.NdJ("setPage",function(m){t.CHM(o);const g=t.oxw(2);return t.KtG(g.setPage(m))}),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA(),t.BQk()}if(2&s){const o=t.oxw(2);let a;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,3,o.articles$)),t.xp6(2),t.Q6J("currentPage",null==(a=t.lcZ(4,5,o.listConfig$))?null:a.currentPage)("totalPages",t.lcZ(5,7,o.totalPages$))}}function f(s,p){1&s&&(t.TgZ(0,"div"),t._uU(1,"No articles are here... yet."),t.qZA())}const T=function(s){return[s]};function K(s,p){if(1&s&&(t.ynx(0),t.YNc(1,G,6,9,"ng-container",0),t.ALo(2,"async"),t.YNc(3,f,2,0,"ng-template",null,2,t.W1O),t.BQk()),2&s){const o=t.MAs(4),a=t.oxw();t.xp6(1),t.Q6J("ngIf",t.VKq(4,T,t.lcZ(2,2,a.articles$)).length>0)("ngIfElse",o)}}function x(s,p){1&s&&(t.TgZ(0,"div"),t._uU(1,"Loading articles..."),t.qZA())}let l=(()=>{class s{constructor(o,a){this.store=o,this.router=a,this.totalPages$=this.store.select(_.qf.selectTotalPages),this.articles$=this.store.select(_.qf.selectArticleEntities),this.listConfig$=this.store.select(_.qf.selectListConfig),this.isLoading$=this.store.select(_.qf.isLoading)}favorite(o){this.store.dispatch(_.Wd.favorite({slug:o}))}unFavorite(o){this.store.dispatch(_.Wd.unfavorite({slug:o}))}navigateToArticle(o){this.router.navigate(["/article",o])}setPage(o){this.store.dispatch(_.up.setListPage({page:o}))}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(Z.yh),t.Y36(F.F0))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["cdt-article-list"]],standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["isLoading",""],["noArticles",""],["data-e2e-id","article-list",3,"article","navigateToArticle","unFavorite","favorite",4,"ngFor","ngForOf"],[3,"currentPage","totalPages","setPage"],["data-e2e-id","article-list",3,"article","navigateToArticle","unFavorite","favorite"]],template:function(a,m){if(1&a&&(t.YNc(0,K,5,6,"ng-container",0),t.ALo(1,"async"),t.YNc(2,x,2,0,"ng-template",null,1,t.W1O)),2&a){const g=t.MAs(3);t.Q6J("ngIf",!t.lcZ(1,2,m.isLoading$))("ngIfElse",g)}},dependencies:[v.ez,v.sg,v.O5,v.Ov,n,X],changeDetection:0})}return s})()}}]);