"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[237],{4237:(eo,U,s)=>{s.r(U),s.d(U,{PROFILE_ROUTES:()=>oo,ProfileComponent:()=>v});var h={};s.r(h),s.d(h,{follow$:()=>H,getProfile$:()=>V,unFollow$:()=>x});var Z=s(7582),W=s(8645),X=s(2572),E=s(9397),c=s(7398),P=s(8791),y=s(6814),$=s(359),d=s(4937),i=s(4221),a=s(9032),o=s(5879),p=s(2096);const r=(0,i.R7)({source:"Profile",events:{loadProfile:(0,i.Ky)(),loadProfileFailure:(0,i.Ky)(),loadProfileSuccess:(0,i.Ky)(),follow:(0,i.Ky)(),followFailure:(0,i.Ky)(),followSuccess:(0,i.Ky)(),unfollow:(0,i.Ky)(),unfollowFailure:(0,i.Ky)(),unfollowSuccess:(0,i.Ky)()}});var D=s(9604);let j=(()=>{class t{constructor(n){this.apiService=n}getProfile(n){return this.apiService.get("/profiles/"+n).pipe((0,c.U)(e=>e.profile))}static#o=this.\u0275fac=function(e){return new(e||t)(o.LFG(D.s))};static#e=this.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const F={username:"",bio:"",image:"",following:!1,loading:!1},w=(0,i.Tz)({name:"profile",reducer:(0,i.Lq)(F,(0,i.on)(r.loadProfile,t=>({...t,loading:!0})),(0,i.on)(r.loadProfileSuccess,(t,l)=>({...l.profile,loading:!1})),(0,i.on)(r.loadProfileFailure,()=>F),(0,i.on)(r.followSuccess,r.unfollowSuccess,(t,l)=>l.profile))}),{selectProfileState:B}=w;var f=s(2873),S=s(6328),A=s(6306),G=s(7407),Y=s(1631),b=s(4664);const x=(0,f.GW)((t=(0,o.f3M)(f.eX),l=(0,o.f3M)(a.bQ))=>t.pipe((0,f.l4)(r.unfollow),(0,c.U)(n=>n.id),(0,S.b)(n=>l.unfollowUser(n).pipe((0,c.U)(e=>r.unfollowSuccess({profile:e.profile})),(0,A.K)(e=>(0,p.of)(r.unfollowFailure({error:e})))))),{functional:!0}),H=(0,f.GW)((t=(0,o.f3M)(f.eX),l=(0,o.f3M)(a.bQ))=>t.pipe((0,f.l4)(r.follow),(0,c.U)(n=>n.id),(0,S.b)(n=>l.followUser(n).pipe((0,c.U)(e=>r.followSuccess({profile:e.profile})),(0,A.K)(e=>(0,p.of)(r.followFailure({error:e})))))),{functional:!0}),V=(0,f.GW)((t=(0,o.f3M)(f.eX),l=(0,o.f3M)(j))=>t.pipe((0,f.l4)(r.loadProfile),(0,G.v)(n=>n.id),(0,Y.z)(n=>n.pipe((0,c.U)(e=>e.id),(0,b.w)(e=>l.getProfile(e).pipe((0,c.U)(u=>r.loadProfileSuccess({profile:u})),(0,A.K)(u=>(0,p.of)(r.loadProfileFailure({error:u})))))))),{functional:!0}),N=function(t,l){return{"btn-outline-secondary":t,"btn-secondary":l}},k=function(){return["/settings"]},q=function(t){return["/profile",t]},C=function(){return{exact:!0}},_=function(t){return["/profile",t,"favorites"]};let v=class L{constructor(l){this.store=l,this.profile$=this.store.select(B),this.currentUser$=this.store.select($.dy),this.isUser$=new W.x}ngOnInit(){(0,X.a)([this.profile$,this.currentUser$]).pipe((0,E.b)(([l])=>{this.username=l.username,this.following=l.following}),(0,c.U)(([l,n])=>l.username===n.username),(0,P.t)(this)).subscribe(l=>this.isUser$.next(l))}toggleFollowing(){this.store.dispatch(this.following?r.unfollow({id:this.username}):r.follow({id:this.username}))}static#o=this.\u0275fac=function(n){return new(n||L)(o.Y36(i.yh))};static#e=this.\u0275cmp=o.Xpm({type:L,selectors:[["cdt-profile"]],standalone:!0,features:[o.jDz],decls:40,vars:48,consts:[[1,"profile-page"],[1,"user-info"],[1,"container"],[1,"row"],[1,"col-xs-12","col-md-10","offset-md-1"],[1,"user-img",3,"src"],["data-e2e-id","article-author-profile",3,"hidden"],[1,"btn","btn-sm","action-btn",3,"hidden","ngClass","click"],[1,"ion-plus-round"],[1,"btn","btn-sm","btn-outline-secondary","action-btn",3,"routerLink","hidden"],[1,"ion-gear-a"],[1,"articles-toggle"],[1,"nav","nav-pills","outline-active"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"]],template:function(n,e){if(1&n&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.ALo(6,"async"),o.TgZ(7,"h4",6),o.ALo(8,"async"),o._uU(9),o.ALo(10,"async"),o.qZA(),o.TgZ(11,"p"),o._uU(12),o.ALo(13,"async"),o.qZA(),o.TgZ(14,"button",7),o.NdJ("click",function(){return e.toggleFollowing()}),o.ALo(15,"async"),o.ALo(16,"async"),o.ALo(17,"async"),o._UZ(18,"i",8),o._uU(19),o.ALo(20,"async"),o.ALo(21,"async"),o.qZA(),o.TgZ(22,"a",9),o.ALo(23,"async"),o._UZ(24,"i",10),o._uU(25," Edit Profile Settings "),o.qZA()()()()(),o.TgZ(26,"div",2)(27,"div",3)(28,"div",4)(29,"div",11)(30,"ul",12)(31,"li",13)(32,"a",14),o.ALo(33,"async"),o._uU(34,"My Articles"),o.qZA()(),o.TgZ(35,"li",13)(36,"a",14),o.ALo(37,"async"),o._uU(38,"Favorited Articles"),o.qZA()()()(),o._UZ(39,"router-outlet"),o.qZA()()()()),2&n){let u,K,O,T,m,g,R,Q;o.xp6(5),o.Q6J("src",null==(u=o.lcZ(6,14,e.profile$))?null:u.image,o.LSH),o.xp6(2),o.Q6J("hidden",null==(K=o.lcZ(8,16,e.profile$))?null:K.loading),o.xp6(2),o.hij(" ",null==(O=o.lcZ(10,18,e.profile$))?null:O.username," "),o.xp6(3),o.Oqu(null==(T=o.lcZ(13,20,e.profile$))?null:T.bio),o.xp6(2),o.Q6J("hidden",o.lcZ(15,22,e.isUser$))("ngClass",o.WLB(38,N,!(null!=(m=o.lcZ(16,24,e.profile$))&&m.following),null==(m=o.lcZ(17,26,e.profile$))?null:m.following)),o.xp6(5),o.AsE(" \xa0 ",null!=(g=o.lcZ(20,28,e.profile$))&&g.following?"Unfollow":"Follow"," ",null==(g=o.lcZ(21,30,e.profile$))?null:g.username," "),o.xp6(3),o.Q6J("routerLink",o.DdM(41,k))("hidden",!1===o.lcZ(23,32,e.isUser$)),o.xp6(10),o.Q6J("routerLink",o.VKq(42,q,null==(R=o.lcZ(33,34,e.profile$))?null:R.username))("routerLinkActiveOptions",o.DdM(44,C)),o.xp6(4),o.Q6J("routerLink",o.VKq(45,_,null==(Q=o.lcZ(37,36,e.profile$))?null:Q.username))("routerLinkActiveOptions",o.DdM(47,C))}},dependencies:[y.ez,y.mk,y.Ov,d.Bz,d.lC,d.rH,d.Od],changeDetection:0})};v=(0,Z.gn)([(0,P.c)(),(0,Z.w6)("design:paramtypes",[i.yh])],v);var M=s(8817);const oo=[{path:":username",component:v,providers:[(0,i.oY)(w),(0,i.oY)(a.$1),(0,f.y3)(h,a.h3)],resolve:{profileResolver:t=>{const l=t.params.username;return(0,o.f3M)(i.yh).dispatch(r.loadProfile({id:l})),(0,p.of)(!0)}},canActivate:[$.p2],children:[{path:"",component:M.P,resolve:{profileArticlesResolver:t=>{const l=t.params.username;return(0,o.f3M)(i.yh).dispatch(a.up.setListConfig({config:{...a.WX.listConfig,filters:{...a.WX.listConfig.filters,author:l}}})),(0,p.of)(!0)}}},{path:"favorites",component:M.P,resolve:{profileFavoritesResolver:t=>{const l=t?.parent?.params.username;return(0,o.f3M)(i.yh).dispatch(a.up.setListConfig({config:{...a.WX.listConfig,filters:{...a.WX.listConfig.filters,favorited:l}}})),(0,p.of)(!0)}}}]}]}}]);